From: =?utf-8?b?55+z5Y2a5paH?= <sbw@sbw.so>
Date: Thu, 28 Dec 2017 14:36:24 +0800
Subject: fix: memory leak in DPictureSequenceView
Forwarded: not-needed

Change-Id: I9eb55d508f0f3d80f83656f8f402543ea1899443
---
 src/widgets/dpicturesequenceview.cpp         | 11 +++++++++++
 src/widgets/private/dpicturesequenceview_p.h |  1 +
 2 files changed, 12 insertions(+)

diff --git a/src/widgets/dpicturesequenceview.cpp b/src/widgets/dpicturesequenceview.cpp
index 2d8b684..318b7a2 100644
--- a/src/widgets/dpicturesequenceview.cpp
+++ b/src/widgets/dpicturesequenceview.cpp
@@ -30,6 +30,17 @@ DPictureSequenceViewPrivate::DPictureSequenceViewPrivate(DPictureSequenceView *q
 
 }
 
+DPictureSequenceViewPrivate::~DPictureSequenceViewPrivate()
+{
+    for (auto *item : pictureItemList)
+    {
+        scene->removeItem(item);
+        delete item;
+    }
+
+    scene->deleteLater();
+}
+
 void DPictureSequenceViewPrivate::init()
 {
     D_Q(DPictureSequenceView);
diff --git a/src/widgets/private/dpicturesequenceview_p.h b/src/widgets/private/dpicturesequenceview_p.h
index 4cb5541..b6f576a 100644
--- a/src/widgets/private/dpicturesequenceview_p.h
+++ b/src/widgets/private/dpicturesequenceview_p.h
@@ -34,6 +34,7 @@ class DPictureSequenceViewPrivate : public DTK_CORE_NAMESPACE::DObjectPrivate
 
 public:
     DPictureSequenceViewPrivate(DPictureSequenceView *q);
+    ~DPictureSequenceViewPrivate();
 
     void init();
     void play();
